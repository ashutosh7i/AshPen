<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Navbar -->
    <div id="navbar">
      <div id="title">
        <div id="imageContainer">
          <img src="https://github.com/ashutosh7i.png" />
        </div>
        <h1>PenName</h1>
        <h2>Aashutosh Soni</h2>
        <div class="navButtonsContainer">
          <button class="navButton" style="background-color: lightgray">
            Setting
          </button>
          <button class="navButton" style="background-color: lightseagreen">
            Save
          </button>
          <button class="navButton" style="background-color: lightgreen">
            Login
          </button>
        </div>
      </div>
    </div>
    <!-- Code Editor Section -->
    <div id="editorsSection">
      <div class="codeEditor">
        <div class="codeEditorNavbar">
          <div class="langLogo"><img src="./assets/html.png" /></div>
          <p class="langName">HTML</p>
          <div class="codeEditorButtons">
            <button>S</button> <button>O</button>
          </div>
        </div>
        <div class="codeArea">
          <textarea
            name=""
            id="htmlCode"
            cols="1"
            rows="1"
            placeholder="code HTML Here"
            oninput="update(0)"
            onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}if(event.keyCode==8){update(1);}"
          ></textarea>
        </div>
      </div>
      <div class="codeEditor">
        <div class="codeEditorNavbar">
          <div class="langLogo"><img src="./assets/css.png" /></div>
          <p class="langName">CSS</p>
          <div class="codeEditorButtons">
            <button>S</button> <button>O</button>
          </div>
        </div>
        <div class="codeArea">
          <textarea
            name=""
            id="cssCode"
            cols="1"
            rows="1"
            placeholder="code CSS Here"
            oninput="update(0)"
            onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}if(event.keyCode==8){update(1);}"
          ></textarea>
        </div>
      </div>
      <div class="codeEditor">
        <div class="codeEditorNavbar">
          <div class="langLogo"><img src="./assets/js.png" /></div>
          <p class="langName">JS</p>
          <div class="codeEditorButtons">
            <button>S</button> <button>O</button>
          </div>
        </div>
        <div class="codeArea">
          <textarea
            name=""
            id="jsCode"
            cols="1"
            rows="1"
            placeholder="code Javascript Here"
            oninput="update(0)"
            onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}if(event.keyCode==8){update(1);}"
          ></textarea>
        </div>
      </div>
    </div>
    <!-- Resizer button here -->
    <div id="resizer">‚ÜïÔ∏è</div>
    <!-- Result Section -->
    <div id="resultSection">
      <div id="resultContainer">
        <!-- <div id="root">Results will be shown here...</div> -->
        <iframe id="viewer"></iframe>
      </div>
    </div>
    <!-- Footer Section -->
    <div id="footer">
      <button class="footerButtons">console</button>
      <button class="footerButtons">Assets</button>
      <button class="footerButtons">Shortcuts</button>
      <span>Made withüíñ,‚òï&üö∞ by Ashutosh7iüöÄ</span>
    </div>
  </body>

 <script>
    var j = 0;
    // Function for live Rendering
    function update(i) {
      if (i == 0) {
        let htmlCode = document.getElementById("htmlCode").value;
        let cssCode = document.getElementById("cssCode").value;
        let javascriptCode = document.getElementById("jsCode").value;
        let text =
          htmlCode +
          "<style>" +
          cssCode +
          "</style>" +
          "<scri" +
          "pt>" +
          javascriptCode +
          "</scri" +
          "pt>";
        let iframe = document.getElementById("viewer").contentWindow.document;
        iframe.open();
        iframe.write(text);
        iframe.close();
      } else if (i == 1) {
        let htmlCode = document.getElementById("htmlCode").value;
        let html = htmlCode.slice(0, htmlCode.length);
        document.getElementById("htmlCode").value = html;
        j = 1;
      }
    }

    const resizer = document.getElementById("resizer");
    const editorsSection = document.getElementById("editorsSection");
    const resultSection = document.getElementById("resultSection");

    let startY, startHeightEditors, startHeightResult;

    resizer.addEventListener("mousedown", (e) => {
      startY = e.clientY;
      startHeightEditors = parseInt(
        getComputedStyle(editorsSection).getPropertyValue("height")
      );
      startHeightResult = parseInt(
        getComputedStyle(resultSection).getPropertyValue("height")
      );

      document.addEventListener("mousemove", handleResize);
      document.addEventListener("mouseup", stopResize);
    });

    function handleResize(e) {
      const delta = e.clientY - startY;
      const newHeightEditors = startHeightEditors + delta;
      const newHeightResult = startHeightResult - delta;

      // Limit the resizing to prevent going below 50% of editorsSection
      if (newHeightEditors >= editorsSection.clientHeight * 0.5) {
        editorsSection.style.height = newHeightEditors + "px";
        resultSection.style.height = newHeightResult + "px";
      }
    }

    function stopResize() {
      document.removeEventListener("mousemove", handleResize);
      document.removeEventListener("mouseup", stopResize);
    }
  </script>
</body>
</html>
